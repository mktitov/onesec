#  Copyright 2009 Mikhail Titov.
# 
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
# 
#       http://www.apache.org/licenses/LICENSE-2.0
# 
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
#  under the License.

@class \u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0437\u043B\u043E\u043C IvrInformer \u0434\u043B\u044F \u043F\u0440\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u0438\u043D\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0430\u0431\u043E\u043D\u0435\u043D\u0442\u043E\u0432
@class#description \u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0437\u043B\u043E\u043C IvrInformer \u0434\u043B\u044F \u043F\u0440\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u0438\u043D\u0444\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0430\u0431\u043E\u043D\u0435\u043D\u0442\u043E\u0432 \
    <p/> \
    <b>\u041F\u0440\u0438\u043C\u0435\u0440 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0442\u0430\u0431\u043B\u0438\u0446\u044B \u0434\u043B\u044F \u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0437\u0430\u043F\u0438\u0441\u0435\u0439 \u0434\u0430\u043D\u043D\u043E\u0439 \u0441\u0445\u0435\u043C\u044B</b> \
    <p/><pre> \
        create table ONESEC_INFORMER_REQUEST\n \
        (\n \
          ID int AUTO_INCREMENT (1),\n \
          OPERATOR_ID varchar(128),\n \
          LIST_DATE date,\n \
          ABONENT_ID varchar(128) not null,\n \
          ABONENT_DESC varchar(1024),\n \
          ABONENT_NUMBER varchar(128) not null, \n \
          CALL_ORDER TINYINT, \n \
          COMPLETION_CODE varchar(32), \n \
          TRIES TINYINT, \n \
          CALL_START_TIME timestamp,\n \
          CALL_END_TIME timestamp,\n \
          CALL_DURATION int,\n \
          CONVERSATION_START_TIME timestamp,\n \
          CONVERSATION_DURATION int, \n \
          TRANSFER_COMPLETION_CODE varchar(32),\n \
          TRANSFER_ADDRESS varchar(128), \n \
          TRANSFER_TIME timestamp, \n \
          TRANSFER_CONVERSATION_START_TIME timestamp, \n \
          TRANSFER_CONVERSATION_DURATION int   \n \
        ) \n \
    </pre> \
    <p/> \
    <b>SELECT \u0434\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u043D\u0435\u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u043D\u043D\u044B\u0445 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0442\u043E\u0440\u043E\u043C \u0430\u0431\u043E\u043D\u0435\u043D\u0442\u043E\u0432</b> \
    <p/><pre> \
            select * from onesec_informer_request r \n\
            where not exists(\n\
                select * from onesec_informer_request r1 \n\
                where r1.abonent_id =r.abonent_id \n\
                  and r1.completion_code in ('COMPLETED_BY_INFORMER', 'COMPLETED_BY_ABONENT')); \n \
    </pre> \
    <p/> \
    <b>SELECT \u0434\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u043D\u043D\u044B\u0445 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0442\u043E\u0440\u043E\u043C \u0430\u0431\u043E\u043D\u0435\u043D\u0442\u043E\u0432</b> \
    <p/><pre> \
        select * from onesec_informer_request \n \
        where completion_code in ('COMPLETED_BY_INFORMER', 'COMPLETED_BY_ABONENT'); \n \
    </pre>

ID #
ACTIVE_LIST \u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u0441\u043F\u0438\u0441\u043E\u043A
OPERATOR_ID \u0418\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440 \u043E\u043F\u0435\u0440\u0430\u0442\u043E\u0440\u0430
LIST_DATE \u0414\u0430\u0442\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0441\u043F\u0438\u0441\u043A\u0430
ABONENT_ID \u0423\u043D\u0438\u043A\u0430\u043B\u044C\u043D\u044B\u0439 \u0438\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440 \u0430\u0431\u043E\u043D\u0435\u043D\u0442\u0430
ABONENT_DESC \u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0430\u0431\u043E\u043D\u0435\u043D\u0442\u0435
ABONENT_NUMBER \u0422\u0435\u043B\u0435\u0444\u043E\u043D\u043D\u044B\u0439 \u043D\u043E\u043C\u0435\u0440 \u0430\u0431\u043E\u043D\u0435\u043D\u0442\u0430
CALL_ORDER \u041F\u043E\u0440\u044F\u0434\u043A\u043E\u0432\u044B\u0439 \u043D\u043E\u043C\u0435\u0440 \u043D\u0430\u0431\u043E\u0440\u0430
COMPLETION_CODE \u041A\u043E\u0434 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F
TRIES \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u043E\u0432 \u043F\u043E\u043F\u044B\u0442\u043E\u043A \u043F\u043E\u0432\u0442\u043E\u0440\u043D\u043E\u0433\u043E \u0432\u044B\u0437\u043E\u0432\u0430
CALL_START_TIME \u0412\u0440\u0435\u043C\u044F \u043D\u0430\u0447\u0430\u043B\u0430 \u0432\u044B\u0437\u043E\u0432\u0430
CALL_END_TIME \u0412\u0440\u0435\u043C\u044F \u0437\u0430\u0432\u0435\u0440\u0435\u0448\u043D\u0438\u044F \u0432\u044B\u0437\u043E\u0432\u0430
CALL_DURATION \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0432\u044B\u0437\u043E\u0432\u0430 (\u0441\u0435\u043A)
CONVERSATION_START_TIME \u0412\u0440\u0435\u043C\u044F \u043D\u0430\u0447\u0430\u043B\u0430 \u0440\u0430\u0437\u0433\u043E\u0432\u043E\u0440\u0430
CONVERSATION_DURATION \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0440\u0430\u0437\u0433\u043E\u0432\u043E\u0440\u0430 (\u0441\u0435\u043A)
TRANSFER_COMPLETION_CODE \u041A\u043E\u0434 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F \u043F\u0435\u0440\u0435\u0432\u043E\u0434\u0430 \u0432\u044B\u0437\u043E\u0432\u0430
TRANSFER_ADDRESS \u0410\u0434\u0440\u0435\u0441 \u043D\u0430 \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u0431\u044B\u043B \u043F\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043D \u0432\u044B\u0437\u043E\u0432
TRANSFER_TIME \u0412\u0440\u0435\u043C\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u0446\u0438\u0438 \u043F\u0435\u0440\u0435\u0432\u043E\u0434\u0430
TRANSFER_CONVERSATION_START_TIME \u0412\u0440\u0435\u043C\u044F \u043D\u0430\u0447\u0430\u043B\u0430 \u0440\u0430\u0437\u0433\u043E\u0432\u043E\u0440\u0430 \u0432 \u043F\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043D\u043D\u043E\u043C \u0432\u044B\u0437\u043E\u0432\u0435
TRANSFER_CONVERSATION_DURATION \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0440\u0430\u0437\u0433\u043E\u0432\u043E\u0440\u0430 \u043F\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043D\u043D\u043E\u0433\u043E \u0432\u044B\u0437\u043E\u0432\u0430 (\u0441\u0435\u043A)
